{"ast":null,"code":"import _slicedToArray from\"D:/Code/React/card-collection/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import app from'./firebase.js';import{getAuth,onAuthStateChanged,setPersistence,browserLocalPersistence,browserSessionPersistence}from'firebase/auth';import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";export var AuthContext=/*#__PURE__*/React.createContext();export var AuthProvider=function AuthProvider(_ref){var children=_ref.children;var _useState$apply=useState.apply(null),_useState$apply2=_slicedToArray(_useState$apply,2),currentUser=_useState$apply2[0],setCurrentUser=_useState$apply2[1];var _useState$apply3=useState.apply(true),_useState$apply4=_slicedToArray(_useState$apply3,2),pending=_useState$apply4[0],setPending=_useState$apply4[1];var auth=getAuth();useEffect(function(){onAuthStateChanged(auth,function(user){console.log(\"hi\");setPersistence(auth,browserSessionPersistence).then(function(){setCurrentUser(user);setPending(false);}).catch(function(error){console.log(error.message);});});});if(pending){return/*#__PURE__*/_jsx(_Fragment,{children:\"Loading ... \"});}return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{currentUser:currentUser},children:children});};","map":{"version":3,"sources":["D:/Code/React/card-collection/src/firebase/Authenticator.js"],"names":["React","useEffect","useState","app","getAuth","onAuthStateChanged","setPersistence","browserLocalPersistence","browserSessionPersistence","AuthContext","createContext","AuthProvider","children","apply","currentUser","setCurrentUser","pending","setPending","auth","user","console","log","then","catch","error","message"],"mappings":"oJAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,GAAP,KAAgB,eAAhB,CACA,OAASC,OAAT,CAAkBC,kBAAlB,CAAsCC,cAAtC,CAAsDC,uBAAtD,CAA+EC,yBAA/E,KAAgH,eAAhH,C,gGAEA,MAAO,IAAMC,CAAAA,WAAW,cAAGT,KAAK,CAACU,aAAN,EAApB,CAEP,MAAO,IAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,MAAkB,IAAfC,CAAAA,QAAe,MAAfA,QAAe,CAC1C,oBAAsCV,QAAQ,CAACW,KAAT,CAAe,IAAf,CAAtC,oDAAOC,WAAP,qBAAoBC,cAApB,qBACA,qBAA8Bb,QAAQ,CAACW,KAAT,CAAe,IAAf,CAA9B,qDAAOG,OAAP,qBAAgBC,UAAhB,qBACA,GAAMC,CAAAA,IAAI,CAAGd,OAAO,EAApB,CAEAH,SAAS,CAAC,UAAM,CACZI,kBAAkB,CAACa,IAAD,CAAO,SAACC,IAAD,CAAU,CAC/BC,OAAO,CAACC,GAAR,CAAY,IAAZ,EACAf,cAAc,CAACY,IAAD,CAAOV,yBAAP,CAAd,CACKc,IADL,CACU,UAAM,CACRP,cAAc,CAACI,IAAD,CAAd,CACAF,UAAU,CAAC,KAAD,CAAV,CACH,CAJL,EAKKM,KALL,CAKW,SAACC,KAAD,CAAW,CACdJ,OAAO,CAACC,GAAR,CAAYG,KAAK,CAACC,OAAlB,EACH,CAPL,EAQH,CAViB,CAAlB,CAWH,CAZQ,CAAT,CAcA,GAAIT,OAAJ,CAAa,CACT,mBAAO,yCAAP,CACH,CAED,mBACI,KAAC,WAAD,CAAa,QAAb,EAAsB,KAAK,CAAE,CAAEF,WAAW,CAAXA,WAAF,CAA7B,UACKF,QADL,EADJ,CAKH,CA5BM","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport app from './firebase.js';\r\nimport { getAuth, onAuthStateChanged, setPersistence, browserLocalPersistence, browserSessionPersistence } from 'firebase/auth';\r\n\r\nexport const AuthContext = React.createContext();\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n    const [currentUser, setCurrentUser] = useState.apply(null);\r\n    const [pending, setPending] = useState.apply(true);\r\n    const auth = getAuth();\r\n\r\n    useEffect(() => {\r\n        onAuthStateChanged(auth, (user) => {\r\n            console.log(\"hi\");\r\n            setPersistence(auth, browserSessionPersistence)\r\n                .then(() => {\r\n                    setCurrentUser(user)\r\n                    setPending(false)\r\n                })\r\n                .catch((error) => {\r\n                    console.log(error.message);\r\n                })\r\n        });\r\n    });\r\n\r\n    if (pending) {\r\n        return <>Loading ... </>\r\n    }\r\n\r\n    return (\r\n        <AuthContext.Provider value={{ currentUser }}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}